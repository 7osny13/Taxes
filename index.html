<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุธุงู ูุชุงุจุนุฉ ุฅูุตุงูุงุช ุงูู 1% ุงูุถุฑูุจูุฉ</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>๐ ูุธุงู ูุชุงุจุนุฉ ุฅูุตุงูุงุช ุงูู 1% ุงูุถุฑูุจูุฉ</h1>
            <div class="header-stats" id="headerStats">
                <div class="stat-card">
                    <span class="stat-label">ุฅุฌูุงูู ุงูููุงุชูุฑ</span>
                    <span class="stat-value" id="totalInvoices">0</span>
                </div>
                <div class="stat-card success">
                    <span class="stat-label">ูุณุชููุฉ</span>
                    <span class="stat-value" id="receivedCount">0</span>
                </div>
                <div class="stat-card warning">
                    <span class="stat-label">ูุนููุฉ</span>
                    <span class="stat-value" id="pendingCount">0</span>
                </div>
                <div class="stat-card danger">
                    <span class="stat-label">ูุชุฃุฎุฑุฉ</span>
                    <span class="stat-value" id="overdueCount">0</span>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <div class="tabs">
            <button class="tab-btn active" onclick="showTab('invoices')">ุงูููุงุชูุฑ</button>
            <button class="tab-btn" onclick="showTab('companies')">ุงูุดุฑูุงุช</button>
            <button class="tab-btn" onclick="showTab('reports')">ุงูุชูุงุฑูุฑ</button>
            <button class="tab-btn" onclick="showTab('alerts')">ุงูุชูุจููุงุช</button>
        </div>

        <!-- Invoices Tab -->
        <div id="invoicesTab" class="tab-content active">
            <div class="section-header">
                <h2>ุฅุฏุงุฑุฉ ุงูููุงุชูุฑ</h2>
                <button class="btn btn-primary" onclick="openInvoiceModal()">+ ูุงุชูุฑุฉ ุฌุฏูุฏุฉ</button>
            </div>

            <!-- Filters -->
            <div class="filters">
                <select id="filterStatus" onchange="filterInvoices()">
                    <option value="all">ูู ุงูุญุงูุงุช</option>
                    <option value="pending">ูุนููุฉ</option>
                    <option value="received">ูุณุชููุฉ</option>
                    <option value="overdue">ูุชุฃุฎุฑุฉ</option>
                </select>
                <select id="filterMonth" onchange="filterInvoices()">
                    <option value="all">ูู ุงูุดููุฑ</option>
                    <option value="1">ููุงูุฑ</option>
                    <option value="2">ูุจุฑุงูุฑ</option>
                    <option value="3">ูุงุฑุณ</option>
                    <option value="4">ุฃุจุฑูู</option>
                    <option value="5">ูุงูู</option>
                    <option value="6">ููููู</option>
                    <option value="7">ููููู</option>
                    <option value="8">ุฃุบุณุทุณ</option>
                    <option value="9">ุณุจุชูุจุฑ</option>
                    <option value="10">ุฃูุชูุจุฑ</option>
                    <option value="11">ููููุจุฑ</option>
                    <option value="12">ุฏูุณูุจุฑ</option>
                </select>
                <input type="text" id="searchInvoice" placeholder="ุจุญุซ ุจุฑูู ุงููุงุชูุฑุฉ ุฃู ุงุณู ุงูุดุฑูุฉ" oninput="filterInvoices()">
            </div>

            <!-- Invoices Table -->
            <div class="table-container">
                <table id="invoicesTable">
                    <thead>
                        <tr>
                            <th>ุฑูู ุงููุงุชูุฑุฉ</th>
                            <th>ุงูุชุงุฑูุฎ</th>
                            <th>ุงูุดุฑูุฉ</th>
                            <th>ุงููุจูุบ ุงูุฅุฌูุงูู</th>
                            <th>ูููุฉ 1%</th>
                            <th>ุงูุญุงูุฉ</th>
                            <th>ุงูุฃูุงู ุงููุชุจููุฉ</th>
                            <th>ุงูุฅูุตุงู</th>
                            <th>ุฅุฌุฑุงุกุงุช</th>
                        </tr>
                    </thead>
                    <tbody id="invoicesTableBody">
                        <tr>
                            <td colspan="9" class="no-data">ูุง ุชูุฌุฏ ููุงุชูุฑ ูุณุฌูุฉ</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Companies Tab -->
        <div id="companiesTab" class="tab-content">
            <div class="section-header">
                <h2>ุฅุฏุงุฑุฉ ุงูุดุฑูุงุช</h2>
                <button class="btn btn-primary" onclick="openCompanyModal()">+ ุดุฑูุฉ ุฌุฏูุฏุฉ</button>
            </div>

            <!-- Companies Search -->
            <div class="filters">
                <input type="text" id="searchCompany" placeholder="ุจุญุซ ุจุงุณู ุงูุดุฑูุฉ ุฃู ุฑูู ุงูุชุณุฌูู ุงูุถุฑูุจู" oninput="filterCompanies()">
            </div>

            <!-- Companies Table -->
            <div class="table-container">
                <table id="companiesTable">
                    <thead>
                        <tr>
                            <th>ุงุณู ุงูุดุฑูุฉ</th>
                            <th>ุฑูู ุงูุชุณุฌูู ุงูุถุฑูุจู</th>
                            <th>ุฑูู ุงููุงุชู</th>
                            <th>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</th>
                            <th>ุนุฏุฏ ุงูููุงุชูุฑ</th>
                            <th>ุงููุนููุฉ</th>
                            <th>ุฅุฌุฑุงุกุงุช</th>
                        </tr>
                    </thead>
                    <tbody id="companiesTableBody">
                        <tr>
                            <td colspan="7" class="no-data">ูุง ุชูุฌุฏ ุดุฑูุงุช ูุณุฌูุฉ</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Reports Tab -->
        <div id="reportsTab" class="tab-content">
            <div class="section-header">
                <h2>ุงูุชูุงุฑูุฑ</h2>
                <button class="btn btn-primary" onclick="generateMonthlyReport()">๐ ุชูุฑูุฑ ุดูุฑู</button>
            </div>

            <!-- Report Filters -->
            <div class="filters">
                <select id="reportMonth">
                    <option value="">ุงุฎุชุฑ ุงูุดูุฑ</option>
                    <option value="1">ููุงูุฑ</option>
                    <option value="2">ูุจุฑุงูุฑ</option>
                    <option value="3">ูุงุฑุณ</option>
                    <option value="4">ุฃุจุฑูู</option>
                    <option value="5">ูุงูู</option>
                    <option value="6">ููููู</option>
                    <option value="7">ููููู</option>
                    <option value="8">ุฃุบุณุทุณ</option>
                    <option value="9">ุณุจุชูุจุฑ</option>
                    <option value="10">ุฃูุชูุจุฑ</option>
                    <option value="11">ููููุจุฑ</option>
                    <option value="12">ุฏูุณูุจุฑ</option>
                </select>
                <select id="reportYear">
                    <option value="2024">2024</option>
                    <option value="2025" selected>2025</option>
                    <option value="2026">2026</option>
                </select>
            </div>

            <!-- Report Summary -->
            <div id="reportSummary" class="report-summary"></div>

            <!-- Report Content -->
            <div id="reportContent" class="report-content"></div>
        </div>

        <!-- Alerts Tab -->
        <div id="alertsTab" class="tab-content">
            <div class="section-header">
                <h2>ุงูุชูุจููุงุช</h2>
            </div>

            <!-- Alerts Container -->
            <div id="alertsContainer" class="alerts-container">
                <div class="no-data">ูุง ุชูุฌุฏ ุชูุจููุงุช ุญุงููุงู</div>
            </div>
        </div>
    </div>

    <!-- Invoice Modal -->
    <div id="invoiceModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="invoiceModalTitle">ูุงุชูุฑุฉ ุฌุฏูุฏุฉ</h3>
                <button class="close-btn" onclick="closeInvoiceModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="invoiceForm" onsubmit="saveInvoice(event)">
                    <input type="hidden" id="invoiceId">
                    
                    <div class="form-group">
                        <label>ุฑูู ุงููุงุชูุฑุฉ *</label>
                        <input type="text" id="invoiceNumber" required>
                    </div>

                    <div class="form-group">
                        <label>ุชุงุฑูุฎ ุงููุงุชูุฑุฉ *</label>
                        <input type="date" id="invoiceDate" required>
                    </div>

                    <div class="form-group">
                        <label>ุงูุดุฑูุฉ *</label>
                        <select id="invoiceCompany" required>
                            <option value="">ุงุฎุชุฑ ุงูุดุฑูุฉ</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>ุงููุจูุบ ุงูุฅุฌูุงูู (ุฌููู) *</label>
                        <input type="number" id="invoiceAmount" step="0.01" required oninput="calculateTaxAmount()">
                    </div>

                    <div class="form-group">
                        <label>ูููุฉ 1% (ุฌููู)</label>
                        <input type="number" id="taxAmount" step="0.01" readonly>
                    </div>

                    <div class="form-group">
                        <label>ููุงุญุธุงุช</label>
                        <textarea id="invoiceNotes" rows="3"></textarea>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="closeInvoiceModal()">ุฅูุบุงุก</button>
                        <button type="submit" class="btn btn-primary">ุญูุธ</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Company Modal -->
    <div id="companyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="companyModalTitle">ุดุฑูุฉ ุฌุฏูุฏุฉ</h3>
                <button class="close-btn" onclick="closeCompanyModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="companyForm" onsubmit="saveCompany(event)">
                    <input type="hidden" id="companyId">
                    
                    <div class="form-group">
                        <label>ุงุณู ุงูุดุฑูุฉ *</label>
                        <input type="text" id="companyName" required>
                    </div>

                    <div class="form-group">
                        <label>ุฑูู ุงูุชุณุฌูู ุงูุถุฑูุจู *</label>
                        <input type="text" id="companyTaxId" required>
                    </div>

                    <div class="form-group">
                        <label>ุฑูู ุงููุงุชู</label>
                        <input type="tel" id="companyPhone">
                    </div>

                    <div class="form-group">
                        <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                        <input type="email" id="companyEmail">
                    </div>

                    <div class="form-group">
                        <label>ุงูุนููุงู</label>
                        <textarea id="companyAddress" rows="3"></textarea>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="closeCompanyModal()">ุฅูุบุงุก</button>
                        <button type="submit" class="btn btn-primary">ุญูุธ</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Receipt Modal -->
    <div id="receiptModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ุฑูุน ุฅูุตุงู ุงูู 1%</h3>
                <button class="close-btn" onclick="closeReceiptModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="receiptForm" onsubmit="uploadReceipt(event)">
                    <input type="hidden" id="receiptInvoiceId">
                    
                    <div class="form-group">
                        <label>ุชุงุฑูุฎ ุงุณุชูุงู ุงูุฅูุตุงู *</label>
                        <input type="date" id="receiptDate" required>
                    </div>

                    <div class="form-group">
                        <label>ุฑูุน ุตูุฑุฉ ุงูุฅูุตุงู ุงููุฎุชูู *</label>
                        <input type="file" id="receiptFile" accept="image/*,.pdf" required onchange="previewReceipt()">
                        <small>ุงูุตูุบ ุงููุฏุนููุฉ: ุตูุฑ (JPG, PNG) ุฃู PDF</small>
                    </div>

                    <div id="receiptPreview" class="receipt-preview"></div>

                    <div class="form-group">
                        <label>ููุงุญุธุงุช</label>
                        <textarea id="receiptNotes" rows="3"></textarea>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="closeReceiptModal()">ุฅูุบุงุก</button>
                        <button type="submit" class="btn btn-primary">ุญูุธ ุงูุฅูุตุงู</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="loading-spinner">
        <div class="spinner"></div>
    </div>

    <script src="config.js"></script>
    <script src="app.js"></script>
    <script src="reports.js"></script>
</body>
</html>
